<!DOCTYPE html>
<html data-cast-api-enabled="true">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Sample Sender application</title>
  </head>
  <body>
    Tinkering!
    <script>
      (function(){
      var cast_api, cv_activity;

      function initializeApi(){
        cast_api = new cast.Api();
        cast_api.addReceiverListener("8f192fac-67e8-46ea-9928-f603570fb7de", onReceiverList);
      };

      function onReceiverList(receivers) {
        if (receivers[0]){
          var request = new cast.LaunchRequest("8f192fac-67e8-46ea-9928-f603570fb7de", receivers[0]);
          request.description = new cast.LaunchDescription();
          request.description.text = "blah blah";
          cast_api.launch(request, onLaunch);
        }
      };

      function onLaunch(activity) {
        if (activity.status == "running") {
          cv_activity = activity;

        // update UI to reflect that the receiver has received the
        // launch command and should start video playback.
        } else if (activity.status == "error") {
          cv_activity = null;
        }
      };

      if (window.cast && window.cast.isAvailable) {
        // Cast is known to be available
        initializeApi();
      } else {
        // Wait for API to post a message to us
        window.addEventListener("message", function(event) {
          if (event.source == window && event.data && 
              event.data.source == "CastApi" &&
              event.data.event == "Hello")
            initializeApi();
        });
      };
      })();
    </script>
  </body>
</html>